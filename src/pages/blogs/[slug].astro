---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Figure from '../../components/Figure.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.id },
		props: { post },
	}));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<BaseLayout
	title={post.data.title}
	description={post.data.summary ?? undefined}
>
	<article>
		<header class="mb-10">
			<h1 class="text-3xl font-semibold tracking-tight text-neutral-900">
				{post.data.title}
			</h1>
			<time
				datetime={post.data.pubDate.toISOString()}
				class="mt-2 block text-neutral-500"
			>
				{post.data.pubDate.toLocaleDateString('en-US', {
					year: 'numeric',
					month: 'long',
					day: 'numeric',
				})}
			</time>
		</header>
		<div class="post-body space-y-5 text-neutral-700 leading-relaxed [&_h2]:mt-10 [&_h2]:text-xl [&_h2]:font-semibold [&_h2]:tracking-tight [&_h2]:text-neutral-900 [&_h3]:mt-6 [&_h3]:text-lg [&_h3]:font-semibold [&_h3]:text-neutral-900 [&_a]:underline [&_a]:decoration-neutral-300 [&_a]:underline-offset-4 hover:[&_a]:decoration-neutral-500 [&_p]:leading-relaxed [&_ul]:list-disc [&_ul]:pl-6 [&_ol]:list-decimal [&_ol]:pl-6 [&_img]:max-w-full [&_img]:rounded [&_img]:my-6 [&_img]:border [&_img]:border-neutral-200">
			<Content components={{ Figure }} />
		</div>
	</article>
	<p class="mt-14">
		<a
			href="/blogs"
			class="text-neutral-600 underline decoration-neutral-300 underline-offset-4 hover:decoration-neutral-500"
		>
			‚Üê Back to blog
		</a>
	</p>
</BaseLayout>
