---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Figure from '../../components/Figure.astro';
import ArticleTags from '../../components/ArticleTags.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
	const patterns = await getCollection('pattern');
	return patterns.map((pattern) => ({
		params: { slug: pattern.id },
		props: { pattern },
	}));
}

const { pattern } = Astro.props;
const { Content } = await render(pattern);
---

<BaseLayout
	title={`${pattern.data.title} â€” Pattern library`}
	description={pattern.data.description}
>
	<header class="mb-10">
		<p class="text-sm text-slate-500 dark:text-slate-400">
			<a href="/pattern-library" class="underline underline-offset-4 hover:text-slate-700 dark:hover:text-slate-300">Pattern library</a>
			<span class="mx-1.5">/</span>
			{pattern.data.title}
		</p>
		<h1 class="mt-2 text-3xl font-semibold tracking-tight text-slate-900 dark:text-slate-100">
			{pattern.data.title}
		</h1>
		<p class="mt-5 text-slate-700 leading-relaxed dark:text-slate-300">
			{pattern.data.description}
		</p>
	</header>

	<div class="pattern-body space-y-8 text-slate-700 leading-relaxed [&_h2]:mt-10 [&_h2]:text-xl [&_h2]:font-semibold [&_h2]:tracking-tight [&_h2]:text-slate-900 [&_h3]:mt-6 [&_h3]:text-lg [&_h3]:font-semibold [&_h3]:text-slate-900 [&_a]:underline [&_a]:decoration-slate-300 [&_a]:underline-offset-4 hover:[&_a]:decoration-slate-500 [&_p]:leading-relaxed [&_code]:rounded [&_code]:bg-slate-200 [&_code]:px-1.5 [&_code]:py-0.5 [&_code]:text-sm dark:text-slate-300 dark:[&_h2]:text-slate-100 dark:[&_h3]:text-slate-100 dark:[&_a]:decoration-slate-500 dark:hover:[&_a]:decoration-slate-400 dark:[&_code]:bg-slate-700">
		<Content components={{ Figure, ArticleTags }} />
	</div>
</BaseLayout>
